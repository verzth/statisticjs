!function(){"use strict";function S(t){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(n,s,t){var e="1.1.0",i=2,r="verzth_stats",a="verzth_sess",c="verzth_pa",p="verzth_session",u="KTe2DztaUw";new t;function h(t){for(var e="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=0;o<t;o++)e+=i.charAt(Math.floor(Math.random()*i.length));return e}function l(){var t=document.cookie.split(";"),o=!1;return t.forEach(function(t,e){for(;" "==t.charAt(0);)t=t.substring(1,t.length);var i=t.split("=");r===i[0]&&(o=i[1])}),o||(d({}),s.AES.encrypt(JSON.stringify({}),s.enc.Base64.stringify(s.enc.Utf8.parse(u))))}function d(t){var e=new Date;e.setFullYear(e.getFullYear()+3),document.cookie=r+"="+s.AES.encrypt(JSON.stringify(t),s.enc.Base64.stringify(s.enc.Utf8.parse(u)))+";expires="+e.toGMTString()+";path=/"}function o(t){var e,i,o,n=new Date;try{e=JSON.parse(s.AES.decrypt(l(),s.enc.Base64.stringify(s.enc.Utf8.parse(u))).toString(s.enc.Utf8))}catch(t){e={}}if(!e.hasOwnProperty(t)){switch(t){case c:e[t]="WEBS"+h(22)+y(n.getFullYear())+y(n.getMonth()+1)+y(n.getDate())+y(n.getHours())+y(n.getMinutes())+y(n.getSeconds());break;case p:e[t]="LIBS"+h(22)+y(n.getFullYear())+y(n.getMonth()+1)+y(n.getDate())+y(n.getHours())+y(n.getMinutes())+y(n.getSeconds())}d(e)}return i=document.cookie.split(";"),o=!1,i.forEach(function(t,e){for(;" "===t.charAt(0);)t=t.substring(1,t.length);var i=t.split("=");a===i[0]&&(o=i[1])}),o||(e[t]="LIBS"+h(22)+y(n.getFullYear())+y(n.getMonth()+1)+y(n.getDate())+y(n.getHours())+y(n.getMinutes())+y(n.getSeconds()),d(e),document.cookie=a+"=true;path=/;"),e[t]}function y(t){return(t<10?"0":"")+t}function f(){return{session_id:o(p),token:h(15),page:this.options.page,page_type:this.options.page_type,isInteraction:!1,age:null,gender:null,user_id:null,carrier:"Statistic JS Libs v"+e+"("+i+")",device_id:o(c),device_brand:navigator.appCodeName,device_version:navigator.appVersion.substring(0,4).trim(),device_type:"Web",device_os:navigator.platform,longitude:null,latitude:null,attributes:{},callforward:null}}function g(){if(null==this.tcx)throw"TCX undefined, please give TCX to the statistic for authentication";var e="",i="";switch(this.tcx.getAuth()===this.tcx.AUTH_TIME&&(e=this.tcx.getTime(),i="?tcx_datetime="+e),this.queueModel.push(this.model),this.options.type){case"content":this.tcx.getToken(function(t){if(!t)throw"Authorization Failed TCX";n.ajax({type:"POST",url:this.options.apiUrl+"content"+i,headers:{"X-TCX-Type":"TWTC","X-TCX-App-Id":this.tcx.getAppID(),"X-TCX-App-Pass":this.tcx.getAppPass({tcx_datetime:e}),"X-TCX-Token":s.enc.Base64.stringify(s.enc.Utf8.parse(t))},contentType:"application/json",dataType:"json",data:JSON.stringify(this.queueModel.pop())})}.bind(this));break;case"content_bulk":this.tcx.getToken(function(t){if(!t)throw"Authorization Failed TCX";n.ajax({type:"POST",url:this.options.apiUrl+"content/bulk"+i,headers:{"X-TCX-Type":"TWTC","X-TCX-App-Id":this.tcx.getAppID(),"X-TCX-App-Pass":this.tcx.getAppPass({tcx_datetime:e}),"X-TCX-Token":s.enc.Base64.stringify(s.enc.Utf8.parse(t))},contentType:"application/json",dataType:"json",data:JSON.stringify(this.queueModel.pop())})}.bind(this)),this.clearContent();break;case"event":this.tcx.getToken(function(t){if(!t)throw"Authorization Failed TCX";n.ajax({type:"POST",url:this.options.apiUrl+"event"+i,headers:{"X-TCX-Type":"TWTC","X-TCX-App-Id":this.tcx.getAppID(),"X-TCX-App-Pass":this.tcx.getAppPass({tcx_datetime:e}),"X-TCX-Token":s.enc.Base64.stringify(s.enc.Utf8.parse(t))},contentType:"application/json",dataType:"json",data:JSON.stringify(this.queueModel.pop())})}.bind(this));break;default:this.tcx.getToken(function(t){if(!t)throw"Authorization Failed TCX";n.ajax({type:"POST",url:this.options.apiUrl+"hit"+i,headers:{"X-TCX-Type":"TWTC","X-TCX-App-Id":this.tcx.getAppID(),"X-TCX-App-Pass":this.tcx.getAppPass({tcx_datetime:e}),"X-TCX-Token":s.enc.Base64.stringify(s.enc.Utf8.parse(t))},contentType:"application/json",dataType:"json",data:JSON.stringify(this.queueModel.pop())})}.bind(this))}}this.Statistic=function(){var t={serverUrl:"",page:""===n(location).attr("host")?"unknown":n(location).attr("host"),page_type:"website",type:"hit",tcx:null};this.model=null,this.queueModel=[],arguments[0]&&"object"===S(arguments[0])?(this.options=function(t,e){var i;for(i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}(t,arguments[0]),this.options.apiUrl=this.options.serverUrl+"fig/"):this.options=t,this.tcx=this.options.tcx,delete this.options.tcx,function(){var i,t=[c,p],o=new Date;try{i=JSON.parse(s.AES.decrypt(l(),s.enc.Base64.stringify(s.enc.Utf8.parse(u))).toString(s.enc.Utf8))}catch(t){i={}}n(t).each(function(t,e){if(!i.hasOwnProperty(e)){switch(e){case c:i[e]="WEBS"+h(22)+y(o.getFullYear())+y(o.getMonth()+1)+y(o.getDate())+y(o.getHours())+y(o.getMinutes())+y(o.getSeconds());break;case p:i[e]="LIBS"+h(22)+y(o.getFullYear())+y(o.getMonth()+1)+y(o.getDate())+y(o.getHours())+y(o.getMinutes())+y(o.getSeconds())}d(i)}})}.call(this)},Statistic.prototype.createHit=function(){return this.options.type="hit",this.model=f.call(this),this},Statistic.prototype.createContent=function(){return this.options.type="content",this.model=f.call(this),Statistic.prototype.setId=function(t){return this.model.id=t,this},Statistic.prototype.setType=function(t){return this.model.type=t,this},Statistic.prototype.setCategory=function(t){return this.model.category=t,this},Statistic.prototype.setAction=function(t){return this.model.action=t,this},Statistic.prototype.setCallforward=function(t){return this.model.callforward=t,this},this},Statistic.prototype.makeContent=function(){return null===this.model&&(this.options.type="content_bulk",this.model=f.call(this),this.model.data=[]),Statistic.prototype.addContent=function(){var i={isInteraction:!1,attributes:{}};return Statistic.prototype.putCustom=function(t,e){return i.attributes[t]=e,this},Statistic.prototype.setId=function(t){return i.id=t,this},Statistic.prototype.setType=function(t){return i.type=t,this},Statistic.prototype.setCategory=function(t){return i.category=t,this},Statistic.prototype.setAction=function(t){return i.action=t,this},Statistic.prototype.commit=function(){return delete Statistic.prototype.setId,delete Statistic.prototype.setType,delete Statistic.prototype.setCategory,delete Statistic.prototype.setAction,this.model.data.push(i),delete Statistic.prototype.commit,Statistic.prototype.putCustom=function(t,e){return this.model.attributes[t]=e,this},this},this},Statistic.prototype.setCallforward=function(t){return this.model.callforward=t,this},delete Statistic.prototype.putCustom,this},Statistic.prototype.isContentAvailable=function(){return null!==this.model},Statistic.prototype.clearContent=function(){this.model=null},Statistic.prototype.createEvent=function(){return this.options.type="event",this.model=f.call(this),Statistic.prototype.setCategory=function(t){return this.model.category=t,this},Statistic.prototype.setName=function(t){return this.model.name=t,this},Statistic.prototype.setType=function(t){return this.model.type=t,this},Statistic.prototype.setId=function(t){return this.model.id=t,this},Statistic.prototype.setSuccess=function(t){return this.model.isSuccess=t||!0,this},Statistic.prototype.setRejectionCode=function(t){return this.model.rejection_code=t,this},Statistic.prototype.setRejectionMessage=function(t){return this.model.rejection_message=t,this},this},Statistic.prototype.setPage=function(t){return this.model.page=t,this},Statistic.prototype.setPageType=function(t){return this.model.page_type=t,this},Statistic.prototype.setInteraction=function(t){return this.model.isInteraction=t||!1,this},Statistic.prototype.setAge=function(t){return this.model.age=t,this},Statistic.prototype.setGender=function(t){return this.model.gender=t,this},Statistic.prototype.setUserId=function(t){return this.model.user_id=t,this},Statistic.prototype.putCustom=function(t,e){return this.model.attributes[t]=e,this},Statistic.prototype.send=function(){var e=this;navigator.geolocation?navigator.geolocation.getCurrentPosition(function(t){e.model.longitude=t.coords.longitude,e.model.latitude=t.coords.latitude,g.call(e)},function(t){g.call(e)}):g.call(e)}}(jQuery,CryptoJS,TCX)}();