!function(){"use strict";function S(t){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(e,s,t){var i="0.0.1",o=1,n="verzth_stats",r="verzth_sess",a="verzth_pa",c="verzth_session",p="KTe2DztaUw";new t;function u(t){for(var e="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=0;o<t;o++)e+=i.charAt(Math.floor(Math.random()*i.length));return e}function h(){var t=document.cookie.split(";"),o=!1;return t.forEach(function(t,e){for(;" "==t.charAt(0);)t=t.substring(1,t.length);var i=t.split("=");n===i[0]&&(o=i[1])}),o||(l({}),s.AES.encrypt(JSON.stringify({}),s.enc.Base64.stringify(s.enc.Utf8.parse(p))))}function l(t){var e=new Date;e.setFullYear(e.getFullYear()+3),document.cookie=n+"="+s.AES.encrypt(JSON.stringify(t),s.enc.Base64.stringify(s.enc.Utf8.parse(p)))+";expires="+e.toGMTString()+";path=/"}function d(t){var e,i,o,n=new Date;try{e=JSON.parse(s.AES.decrypt(h(),s.enc.Base64.stringify(s.enc.Utf8.parse(p))).toString(s.enc.Utf8))}catch(t){e={}}if(!e.hasOwnProperty(t)){switch(t){case a:e[t]="WEBS"+u(22)+y(n.getFullYear())+y(n.getMonth()+1)+y(n.getDate())+y(n.getHours())+y(n.getMinutes())+y(n.getSeconds());break;case c:e[t]="LIBS"+u(22)+y(n.getFullYear())+y(n.getMonth()+1)+y(n.getDate())+y(n.getHours())+y(n.getMinutes())+y(n.getSeconds())}l(e)}return i=document.cookie.split(";"),o=!1,i.forEach(function(t,e){for(;" "===t.charAt(0);)t=t.substring(1,t.length);var i=t.split("=");r===i[0]&&(o=i[1])}),o||(e[t]="LIBS"+u(22)+y(n.getFullYear())+y(n.getMonth()+1)+y(n.getDate())+y(n.getHours())+y(n.getMinutes())+y(n.getSeconds()),l(e),document.cookie=r+"=true;path=/;"),e[t]}function y(t){return(t<10?"0":"")+t}function f(){return{session_id:d(c),token:u(15),page:this.options.page,page_type:this.options.page_type,isInteraction:!1,age:null,gender:null,user_id:null,carrier:"Statistic JS Libs v"+i+"("+o+")",device_id:d(a),device_brand:navigator.appCodeName,device_version:navigator.appVersion.substring(0,4).trim(),device_type:"Web",device_os:navigator.platform,longitude:null,latitude:null,attributes:{},callforward:null}}function g(){if(null==this.tcx)throw"TCX undefined, please give TCX to the statistic for authentication";switch(this.queueModel.push(this.model),this.options.type){case"content":this.tcx.getToken(function(t){if(!t)throw"Authorization Failed TCX";e.ajax({type:"POST",url:this.options.apiUrl+"content",headers:{"X-TCX-Type":"TWTC","X-TCX-App-Id":this.tcx.getAppID(),"X-TCX-App-Pass":this.tcx.getAppPass(),"X-TCX-Token":s.enc.Base64.stringify(s.enc.Utf8.parse(t))},contentType:"application/json",dataType:"json",data:JSON.stringify(this.queueModel.pop())})}.bind(this));break;case"content_bulk":this.tcx.getToken(function(t){if(!t)throw"Authorization Failed TCX";e.ajax({type:"POST",url:this.options.apiUrl+"content/bulk",headers:{"X-TCX-Type":"TWTC","X-TCX-App-Id":this.tcx.getAppID(),"X-TCX-App-Pass":this.tcx.getAppPass(),"X-TCX-Token":s.enc.Base64.stringify(s.enc.Utf8.parse(t))},contentType:"application/json",dataType:"json",data:JSON.stringify(this.queueModel.pop())})}.bind(this)),this.clearContent();break;case"event":this.tcx.getToken(function(t){if(!t)throw"Authorization Failed TCX";e.ajax({type:"POST",url:this.options.apiUrl+"event",headers:{"X-TCX-Type":"TWTC","X-TCX-App-Id":this.tcx.getAppID(),"X-TCX-App-Pass":this.tcx.getAppPass(),"X-TCX-Token":s.enc.Base64.stringify(s.enc.Utf8.parse(t))},contentType:"application/json",dataType:"json",data:JSON.stringify(this.queueModel.pop())})}.bind(this));break;default:this.tcx.getToken(function(t){if(!t)throw"Authorization Failed TCX";e.ajax({type:"POST",url:this.options.apiUrl+"hit",headers:{"X-TCX-Type":"TWTC","X-TCX-App-Id":this.tcx.getAppID(),"X-TCX-App-Pass":this.tcx.getAppPass(),"X-TCX-Token":s.enc.Base64.stringify(s.enc.Utf8.parse(t))},contentType:"application/json",dataType:"json",data:JSON.stringify(this.queueModel.pop())})}.bind(this))}}this.Statistic=function(){var t={serverUrl:"",page:""===e(location).attr("host")?"unknown":e(location).attr("host"),page_type:"website",type:"hit",tcx:null};this.model=null,this.queueModel=[],arguments[0]&&"object"===S(arguments[0])?(this.options=function(t,e){var i;for(i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}(t,arguments[0]),this.options.apiUrl=this.options.serverUrl+"fig/"):this.options=t,this.tcx=this.options.tcx,delete this.options.tcx,function(){var i,t=[a,c],o=new Date;try{i=JSON.parse(s.AES.decrypt(h(),s.enc.Base64.stringify(s.enc.Utf8.parse(p))).toString(s.enc.Utf8))}catch(t){i={}}e(t).each(function(t,e){if(!i.hasOwnProperty(e)){switch(e){case a:i[e]="WEBS"+u(22)+y(o.getFullYear())+y(o.getMonth()+1)+y(o.getDate())+y(o.getHours())+y(o.getMinutes())+y(o.getSeconds());break;case c:i[e]="LIBS"+u(22)+y(o.getFullYear())+y(o.getMonth()+1)+y(o.getDate())+y(o.getHours())+y(o.getMinutes())+y(o.getSeconds())}l(i)}})}.call(this)},Statistic.prototype.createHit=function(){return this.options.type="hit",this.model=f.call(this),this},Statistic.prototype.createContent=function(){return this.options.type="content",this.model=f.call(this),Statistic.prototype.setId=function(t){return this.model.id=t,this},Statistic.prototype.setType=function(t){return this.model.type=t,this},Statistic.prototype.setCategory=function(t){return this.model.category=t,this},Statistic.prototype.setAction=function(t){return this.model.action=t,this},Statistic.prototype.setCallforward=function(t){return this.model.callforward=t,this},this},Statistic.prototype.makeContent=function(){return null===this.model&&(this.options.type="content_bulk",this.model=f.call(this),this.model.data=[]),Statistic.prototype.addContent=function(){var i={isInteraction:!1,attributes:{}};return Statistic.prototype.putCustom=function(t,e){return i.attributes[t]=e,this},Statistic.prototype.setId=function(t){return i.id=t,this},Statistic.prototype.setType=function(t){return i.type=t,this},Statistic.prototype.setCategory=function(t){return i.category=t,this},Statistic.prototype.setAction=function(t){return i.action=t,this},Statistic.prototype.commit=function(){return delete Statistic.prototype.setId,delete Statistic.prototype.setType,delete Statistic.prototype.setCategory,delete Statistic.prototype.setAction,this.model.data.push(i),delete Statistic.prototype.commit,Statistic.prototype.putCustom=function(t,e){return this.model.attributes[t]=e,this},this},this},Statistic.prototype.setCallforward=function(t){return this.model.callforward=t,this},delete Statistic.prototype.putCustom,this},Statistic.prototype.isContentAvailable=function(){return null!==this.model},Statistic.prototype.clearContent=function(){this.model=null},Statistic.prototype.createEvent=function(){return this.options.type="event",this.model=f.call(this),Statistic.prototype.setCategory=function(t){return this.model.category=t,this},Statistic.prototype.setName=function(t){return this.model.name=t,this},Statistic.prototype.setType=function(t){return this.model.type=t,this},Statistic.prototype.setId=function(t){return this.model.id=t,this},Statistic.prototype.setSuccess=function(t){return this.model.isSuccess=t||!0,this},Statistic.prototype.setRejectionCode=function(t){return this.model.rejection_code=t,this},Statistic.prototype.setRejectionMessage=function(t){return this.model.rejection_message=t,this},this},Statistic.prototype.setPage=function(t){return this.model.page=t,this},Statistic.prototype.setPageType=function(t){return this.model.page_type=t,this},Statistic.prototype.setInteraction=function(t){return this.model.isInteraction=t||!1,this},Statistic.prototype.setAge=function(t){return this.model.age=t,this},Statistic.prototype.setGender=function(t){return this.model.gender=t,this},Statistic.prototype.setUserId=function(t){return this.model.user_id=t,this},Statistic.prototype.putCustom=function(t,e){return this.model.attributes[t]=e,this},Statistic.prototype.send=function(){var e=this;navigator.geolocation?navigator.geolocation.getCurrentPosition(function(t){e.model.longitude=t.coords.longitude,e.model.latitude=t.coords.latitude,g.call(e)},function(t){g.call(e)}):g.call(e)}}(jQuery,CryptoJS,TCX)}();